<html>
	<head>
		<link rel="stylesheet" type="text/css" href="../css/mapview.css">
	</head>
	<body>
		<h2>RouteView</h2>
		<img src="../png/routeview.png" />

		<p>This viewer creates and edits nodes on the Map that aLiens and civilians use for spawning and patrolling, and that XCOM agents might use for spawning. The actual mechanics that the XCOM engine employs is beyond the purview of this document.</p>

		<p>Left-click on a tile selects that tile. Left-click on a route-node selects that route-node for editing. Left-click on a route-node and drag it to a tile that does not have a node and the node will be moved to that location.</p>

		<p>Right-click on a tile without a node creates a node on that tile. It can also do automatic node-linking (see connection options below).</p>

		<p>Using the mousewheel when the panel is focused raises and lowers the editing level.</p>

		<p>Color-blobs that appear on the Map are simplistic representations of the various parts that have been placed on a tile. Floor parts are not represented however.</p>

		<p>Route nodes may be presented in different colors depending on whether or not they have a spawn-weight (non-zero). Colored lines are drawn between linked nodes. A selected node and its link-lines may appear in yet another color. The colors can be set in Options, as with the other viewers.</p>

		<p>An overlay appears with tile position and node data as the mouse moves over the Map. Also, two small vertical bars are shown at each node - the left bar (red) presents the spawn weight and the right bar (blue) presents the patrol priority. The info-overlay and importance-meters can be toggled on and off separately in Options.</p>

		<p>The menubar along the top of the panel has a dropdown box with three connection-types.<br><br>
&nbsp;&nbsp;&nbsp;&nbsp;DontConnect - no automatic node-linking is performed.<br>
&nbsp;&nbsp;&nbsp;&nbsp;OneWayConnect - when a node is selected and another node is then either created or right-clicked, a patrol-route is automatically linked from the first node to the second node, provided that a link-slot is available.<br>
&nbsp;&nbsp;&nbsp;&nbsp;TwoWayConnect - when a node is selected and another node is then either created or right-clicked, a patrol-route is automatically linked both ways between the nodes, provided that link-slots are available.</p>

		<br>
		<h3>Tile data</h3>
		<p>This section displays the currently selected node's position and ID. It also shows the ID of a node that the mouse-cursor hovers over.</p>

		<br>
		<h3>Patrol data</h3>
		<p>
&nbsp;&nbsp;&nbsp;&nbsp;Unit Type - aLien units must have this characteristic to patrol the node.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Priority - the priority that aLien units will give this node when patrolling nearby (note that even "0" is valid for patrolling).<br>
&nbsp;&nbsp;&nbsp;&nbsp;Attack Base - this acts as a lure for aLien units. If and when they reach a node with a non-zero value, they will start shooting up XCOM Base facilities. This is relevant only for XCOM Base defense missions.</p>

		<br>
		<h3>Spawn data</h3>
		<p>
&nbsp;&nbsp;&nbsp;&nbsp;Rank - the faction or, if aLien, the rank of units that may spawn at the node.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Weight - the weight given to spawn at the node (note that "0" will disallow spawns).</p>

		<br>
		<h3>Link data</h3>
		<p>
&nbsp;&nbsp;&nbsp;&nbsp;Link1..5 - each node has up to five destination nodes. The first field specifies the destination's ID or a compass point. The second field specifies the characteristic that an aLien unit must have to use the link. The third field is the distance between the origin and destination nodes, and is calculated automatically by MapView. It is not used by XCOM mechanics and is purely informational. An up arrow appears after the entry if the link goes to a higher level on the Map, or a down arrow appears if the entry goes to a lower level on the Map.</p>

		<p>
&nbsp;&nbsp;&nbsp;&nbsp;Along the right side of the Link data is a column of Go buttons. A button is enabled if it has a regular node as the link's destination. When the mouse is hovered over an enabled button, the link's destination is highlighted along with its link-line. Clicking an enabled Go button selects that link's destination node. To the right of that column is the Og button, which is a Go button in reverse. It can be used as a back-button but with an interesting difference, in that if a Go button has been clicked then the source node can be returned to even if other nodes have been selected inbetween clicking a Go button and the Og button.</p>

		<p>
&nbsp;&nbsp;&nbsp;&nbsp;If a node is detected as linked to an Out of Bounds node the "Link" text will appear in red. Clicking the Go button of such a link will open a dialog that allows the Out of Bounds destination node to be deleted.</p>

		<br>
		<h3>Node editor</h3>
		<p>
&nbsp;&nbsp;&nbsp;&nbsp;Cut [Ctrl+X] - deletes the currently selected node and copies its Patrol and Spawn data to the Windows clipboard.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Copy [Ctrl+C] - copies the currently selected node's Patrol and Spawn data to the Windows clipboard.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Paste [Ctrl+V] - pastes Patrol and Spawn data from the Windows clipboard to the currently selected node.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Delete [Delete] - deletes the currently selected node.</p>

		<p>Note that [Ctrl+S] can be used to save the Routes when the center panel has focus. A hint "routes changed" will appear in the lower right corner of the data area if the Routefile is changed but has not been saved.</p>

		<p>[F7] closes RouteView and [F8] closes TopRouteView.</p>

		<br>
		<h3>File menu</h3>

		<p>export routes to .RMP file - saves a copy of the current routes to a file that can then be imported as the routes for a different Map</p>
		<p>import routes from .RMP file - implements the nodes of any .RMP file as the nodes for the currently displayed Map. Note that this will delete all current nodes on the Map and replace them with those in the imported Routefile.</p>

		<br>
		<h3>Edit menu</h3>

		<p>All Nodes Rank 0 - sets every node's spawn rank to 0. A confirmation dialog is shown.</p>
		<p>Clear Link data - resets all five link-slots of a selected node to NotUsed. A confirmation dialog is shown.</p>
		<p>Update all Link distances - a utility that ensures that all displayed link distances are correct. A confirmation dialog is <b>not</b> shown.</p>
		<p>node up 1 level - moves a selected node up 1 level if possible</p>
		<p>node down 1 level - moves a selected node down 1 level if possible</p>

		<br>
		<h3>Debug menu</h3>

		<p>Check Node ranks - tests for invalid node ranks.</p>
		<p>Check Out of Bounds nodes - tests for nodes that are outside the current Map's boundaries.</p>

		<br>
		<p>Options [Ctrl+O] - opens and closes the Options for RouteView. Descriptions for the entries appear at the bottom of that window.</p>
		<br>
	</body>
</html>
