<html>
	<head>
		<link rel="stylesheet" type="text/css" href="../css/mapview.css">
	</head>
	<body>
		<h2>MainView</h2>
		<img src="../png/mainview.png" />

		<p>On the left is the Map Tree. This is where tilesets are listed. The toplevel branch is the Group, under that is the Category, and under that are the Tilesets.</p>

		<p>The Group's label must start with either "ufo" or "tftd" (case insensitive). This determines the palette and the default basepath for all tilesets in that group. The Group's label must be unique.</p>

		<p>The Category can be labelled whatever, but must be unique in its Group.</p>

		<p>The Tileset is what gets displayed in the viewer panel. It appears very much like what is seen during gameplay. Using the mousewheel when the panel is focused raises and lowers the editing level. The label of a Tileset must be unique within its Category.</p>

		<p>Left-click selects a branch, and a right-click opens a context menu that allows the selected branch to be edited. Groups and Categories can be created, re-labeled, or deleted. Tilesets can be created or modified with the Tileset Editor. They can also be deleted. Deleting a Tileset in the Map Tree does not affect files on your hardrive.</p>

		<p>Above the viewer panel are buttons for<br><br>
&nbsp;&nbsp;&nbsp;&nbsp;- zoomin<br>
&nbsp;&nbsp;&nbsp;&nbsp;- zoomout<br>
&nbsp;&nbsp;&nbsp;&nbsp;- autozoom<br>
&nbsp;&nbsp;&nbsp;&nbsp;- level up [mousewheel up]<br>
&nbsp;&nbsp;&nbsp;&nbsp;- level down [mousewheel down]<br>
&nbsp;&nbsp;&nbsp;&nbsp;- cut a selected area [Ctrl+X]<br>
&nbsp;&nbsp;&nbsp;&nbsp;- copy a selected area [Ctrl+C]<br>
&nbsp;&nbsp;&nbsp;&nbsp;- paste area at a selected tile [Ctrl+V]<br>
&nbsp;&nbsp;&nbsp;&nbsp;- delete a selected area [Delete]<br>
&nbsp;&nbsp;&nbsp;&nbsp;- fill a selected area with the currently selected tilepart from TileView [F]</p>

		<p>Please note that pasting copied parts from one Map to a different Map usually requires that the allocated terrains of both Maps be identical.</p>

		<p>The F1 key starts animating any tiles that animate. The F2 key stops the animations. The F3 key, if the panel has focus, toggles any doors open and closed when animations are not playing, and animates doors if animations are playing. Toggling animations off automatically closes all the doors. These settings are saved in MainView's Options.</p>
<!--	Note that animations can be paused on any of their eight frames, and using the doors toggle will reset their state to normal. -->

		<p>The F4 key toggles the grid on/off. This setting is saved in MainView's Options.</p>

		<p>The F3 key will search the Maptree for the text in the search-box if the search-box or the Maptree has focus. Enter will also search but only if the search-box has focus.</p>

		<p>The statusbar below the viewer panel shows<br><br>
&nbsp;&nbsp;&nbsp;&nbsp;- the current scale factor of the tileset graphics<br>
&nbsp;&nbsp;&nbsp;&nbsp;- the label of the currently loaded tileset<br>
&nbsp;&nbsp;&nbsp;&nbsp;- the dimensions (x,y,z or column,row,level) of the currently loaded tileset<br>
&nbsp;&nbsp;&nbsp;&nbsp;- the currently selected tile position<br>
&nbsp;&nbsp;&nbsp;&nbsp;- the dimensions of a currently selected area</p>

		<p>The basepath of the displayed tileset is shown in the window's titlebar.</p>

		<p>In the viewer panel, a left-click selects a tile, and a left-click drag motion will select multiple tiles over a rectangular area. Drag-selecting tiles will get laggy on larger maps - use TopView to drag-select an area if any sluggishness becomes too annoying.</p>

		<p>Autozoom toggles off when either zoomin or zoomout are clicked.</p>

		<p>Be aware that north is the upper right corner of the panel.</p>

		<p>Note that [Ctrl+S] can be used to save the Map when the center panel has focus. An asterisk will appear after the Map's label on the statusbar if the Mapfile is changed but has not been saved. Also note that an asterisk will appear after the Map's basepath on the titlebar if the Maptree has changed but has not been saved.</p>

		<br>
		<h3>Keyboard navigation</h3>

		<p>The numeric keypad - that is, the arrow keys and [Home], [End], [PageUp], [PageDown] - select the tile in the chosen direction. The add and subtract keys on the numeric keypad lower and raise the current level respectively.</p>

		<p>[Shift] can be used to create a selection area.</p>

		<p>[Esc] can also be used to abort a multi-tile selection.</p>

		<br>
		<h3>File menu</h3>

		<p>Save All [Ctrl+A] - forces a save of the current Map, Route, and Maptree files.</p>
		<p>Save Map [Ctrl+M] - forces a save of the current Map file.</p>
		<p>Save Routes [Ctrl+R] - forces a save of the current Route file.</p>
		<p>Save As ... - saves/exports the current Map and Route files to a user-specified path and label. The path cannot be the root directory of a drive. The reason for this is that when you save the Map, the routine finds the parent folder of the chosen folder, then ensures that the Map gets saved in a subfolder called \MAPS and the Routes gets saved in a subfolder called \ROUTES. This allows the saved Map to be added to MainView's Maptree while maintaining consistency of code-design.</p>
		<p>Save Maptree [Ctrl+T] - forces a save of the Maptree.</p>
		<p>Save Image [Ctrl+I] - saves a PNG of the tileset that's currently displayed in the viewer panel to a specified path.</p>
		<p>Resize Map [Ctrl+Z] - opens a dialog box for modifying the dimensions of the currently loaded Map.</p>
		<p>Map Info [Ctrl+F] - displays a bit of information about the currently loaded Map.</p>
		<p>ScanG view [Ctrl+G] - displays an overhead view of the currently loaded Map. Note that the graphics for this rely on ScanG.Dat in the GEODATA folder of the Configurator's basepath. The displayed level can be changed with the mousewheel. LMB double-click toggles the display between showing multiple levels and only a single level. RMB double-click reloads ScanG.Dat from disk.</p>
		<p>Reload terrains [Ctrl+N] - reloads the Mapfile, Routefile, and any terrain MCDs/PCKs/TABs of the current tileset from disk. Someday this might reload <b>only</b> terrains but for now it's the whole shebang. It prompts to save Map and Routes if they've changed.</p>
<!--	<p>Regen Occult [Ctrl+O] - to draw all the sprites in the viewer panel faster, any parts that are hidden beneath floors will be ignored, or occulted. But if you strip a floor off of a level above the ground floor this means you could be left looking into a big hole of what appears to be nothing. The tileparts are still there but they've been occulted for faster drawing. Use Regen Occult to make them appear as expected. Also mind that the reverse happens. If a floor is laid down above ground level, and MainView starts lagging, try issuing the Regen Occult command which will stop any sprites that have been hidden from drawing. Occulted tiles are re-calculated every time a Map loads.</p> -->
		<p>Quit [Ctrl+Q] - quits MapView II</p>

		<br>
		<h3>Edit menu</h3>

		<p>Configurator - opens the Configuration Editor. This is where to specify or modify the paths to your XCOM installation folder(s) for UFO and/or TFTD. It can also replace your Maptree file with a fresh one that comes hardcoded. WARNING: doing that would obliterate all customizations that have been done to the Maptree. Alternately, the Configurator can generate a file of the hardcoded, or default tileset-data to a template file. The template could be useful if MapView II had been configured for UFO (or TFTD) and subsequently requires the data for TFTD (or UFO) tilesets. The default data can then be copied from the template into your <b>MapTilesets.yml</b> file.</p>
<!--	Note that the tileset-data for both games will exist in your MapTilesets configuration until the first time that the Maptree is saved, at which point the data for either game that is not configured will be erased. Hint: force a save of the Maptree to get the application to initialize a fraction of a second faster. -->
		<p>Options [Ctrl+O] - opens and closes the Options for MainView. Descriptions for the entries appear at the bottom of that window.</p>

		<br>
		<h3>Viewers menu</h3>

		<p>TileView [F5] - opens and closes the window that shows the tileparts of the terrains of the currently loaded tileset.</p>
		<p>TopView [F6] - opens and closes the window that shows an editable, 2-dimensional view of the currently loaded Map. This is usually more responsive than working in the MainView panel.</p>
		<p>RouteView [F7] - opens and closes the window that shows an editable, 2-dimensional view of the currently loaded Routes.</p>
		<p>TopRouteView [F8] - opens and closes a window that conflates TopView and RouteView as separate tab-pages in a single viewer.</p>

		<p>F5 through F8 will open or close the respective viewers regardless of which viewer is currently active. Note that if a viewer is minimized and its F-key is pressed the viewer returns to its restored state instead of closing.</p>

		<p>Ctrl+F5 through Ctrl+F8 focuses the respective viewer.</p>

		<p>minimize all [F11] - minimizes all viewers.</p>
		<p>restore all [F12] - restores all viewers.</p>

		<br>
		<h3>Help menu</h3>

		<p>Help - shows this CHM helpfile.</p>
		<p>Colors - shows the colors that have been set in Options for TopView, RouteView, and TileView. Of particular interest is that, on the tab labelled TileView, background colors for all tileparts' special properties are tabled. Special properties are an XCOM mechanic, and are generally used to ferry stuff between the battlefield and an XCOM base or vice versa. They are beyond the purview of this document.</p>
		<p>About - shows the version, the build date, you know the drill.</p>
		<br>
	</body>
</html>
